# Deploy specified role to target node(s)

- hosts: "{{ target }}"
  become: true
  gather_facts: false
  tasks:

  #- name: Wait for ready hosts
  #  ansible.builtin.wait_for_connection:
  #    timeout: 300
  
- hosts: "{{ target }}"
  become: true
  gather_facts: true
  tasks:
    - name: "Deploy Roles"
      include_role:
        name: "{{ item | trim }}"
      loop: "{{ primary_role.split(',') }}"
      when: primary_role is defined and primary_role != ""

